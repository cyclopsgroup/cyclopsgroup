<?xml version="1.0" encoding="UTF-8"?>
<plexus>
    <components>
        <component>
            <role>com.cyclopsgroup.waterview.Waterview</role>
            <implementation>com.cyclopsgroup.waterview.core.DefaultWaterview</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
            <configuration>
                <pipelines>
                    <pipeline pattern=".*" role="com.cyclopsgroup.waterview.pipeline.RenderPage"/>
                </pipelines>
            </configuration>
        </component>
        <component>
            <role>com.cyclopsgroup.waterview.ModuleManager</role>
            <implementation>com.cyclopsgroup.waterview.core.DefaultModuleManager</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
            <configuration>
                <packages>
                    <package>com.cyclopsgroup.waterview.ui</package>
                </packages>
                <default-layout>waterview.3ColumnLayout</default-layout>
                <default-frame>waterview.DefaultDisplayFrame</default-frame>
            </configuration>
        </component>
        <component>
            <role>com.cyclopsgroup.waterview.pipeline.RenderPage</role>
            <implementation>com.cyclopsgroup.waterview.core.Pipeline</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
            <configuration>
                <valves>
                    <valve role="com.cyclopsgroup.waterview.jelly.valves.CreatePageContextValve"/>
                    <valve role="com.cyclopsgroup.waterview.valves.ParseURLValve"/>
                    <valve role="com.cyclopsgroup.waterview.jelly.valves.DeterminePageValve"/>
                    <valve role="com.cyclopsgroup.waterview.valves.ResolveActionsValve"/>
                    <valve role="com.cyclopsgroup.waterview.valves.RenderPageValve"/>
                </valves>
            </configuration>
        </component>
        <component>
            <role>com.cyclopsgroup.waterview.jelly.valves.CreatePageContextValve</role>
            <implementation>com.cyclopsgroup.waterview.jelly.valves.CreatePageContextValve</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
        </component>
        <component>
            <role>com.cyclopsgroup.waterview.valves.ParseURLValve</role>
            <implementation>com.cyclopsgroup.waterview.valves.ParseURLValve</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
        </component>
        <component>
            <role>com.cyclopsgroup.waterview.jelly.valves.DeterminePageValve</role>
            <implementation>com.cyclopsgroup.waterview.jelly.valves.DeterminePageValve</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
        </component>
        <component>
            <role>com.cyclopsgroup.waterview.valves.ResolveActionsValve</role>
            <implementation>com.cyclopsgroup.waterview.valves.ResolveActionsValve</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
            <configuration>
                <resolvers>
                    <resolver pattern=".*\.do" role="com.cyclopsgroup.waterview.core.ModuleActionResolver"/>
                    <resolver pattern=".*\.j" role="com.cyclopsgroup.waterview.jelly.JellyEngine"/>
                    <resolver pattern=".*\.v" role="com.cyclopsgroup.waterview.velocity.VelocityEngine"/>
                    <reoslver pattern=".*" role="com.cyclopsgroup.waterview.core.ModuleActionResolver"/>
                </resolvers>
            </configuration>
        </component>
        <component>
            <role>com.cyclopsgroup.waterview.valves.RenderPageValve</role>
            <implementation>com.cyclopsgroup.waterview.valves.RenderPageValve</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
            <configuration>
                <view-factories>
                    <view-factory pattern=".*\.jelly" role="com.cyclopsgroup.waterview.jelly.JellyEngine"/>
                    <view-factory pattern=".*\.vm" role="com.cyclopsgroup.waterview.velocity.VelocityEngine"/>
                </view-factories>
                <view-cache>0</view-cache>
            </configuration>
        </component>
        <component>
            <role>com.cyclopsgroup.waterview.CacheManager</role>
            <implementation>com.cyclopsgroup.waterview.core.cache.NoneCacheManager</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
        </component>
    </components>
    <load-on-start>
        <component>
            <role>com.cyclopsgroup.waterview.Waterview</role>
        </component>
    </load-on-start>
</plexus>
