<?xml version="1.0" encoding="UTF-8"?>
<component-set>
    <components>
        <component>
            <role>com.cyclopsgroup.waterview.Waterview</role>
            <implementation>com.cyclopsgroup.waterview.core.DefaultWaterview</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
            <configuration>
                <pipeline>
                    <valve role="cyclopsgroup.waterview.valve.parseurl"/>
                    <valve role="cyclopsgroup.waterview.valve.populatetools"/>
                    <valve role="cyclopsgroup.waterview.valve.runactions"/>
                    <valve role="cyclopsgroup.waterview.valve.renderpage"/>
                </pipeline>
            </configuration>
        </component>
        <component>
            <role>com.cyclopsgroup.waterview.ModuleResolver</role>
            <implementation>com.cyclopsgroup.waterview.core.DefaultModuleResolver</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
            <configuration>
                <cache-size>1000</cache-size>
                <packages>
                    <package>com.cyclopsgroup.waterview.ui</package>
                    <package>com.cyclopsgroup.otherprj.ui</package>
                </packages>
            </configuration>
        </component>
        <!--
        *************** VALVES ****************
        -->
        <component>
            <role>cyclopsgroup.waterview.valve.parseurl</role>
            <implementation>com.cyclopsgroup.waterview.core.ParseURLValve</implementation>
            <configuration>
                <default-path>/Index.vm</default-path>
            </configuration>
        </component>
        <component>
            <role>cyclopsgroup.waterview.valve.populatetools</role>
            <implementation>com.cyclopsgroup.waterview.tool.PopulateToolsValve</implementation>
            <configuration>
                <tools>
                    <tool name="link" class="com.cyclopsgroup.waterview.tool.LinkTool"/>
                </tools>
            </configuration>
        </component>
        <component>
            <role>cyclopsgroup.waterview.valve.runactions</role>
            <implementation>com.cyclopsgroup.waterview.core.RunActionsValve</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
            <configuration>
                <extension-action extension="do"/>
                <parameter-action parameter="do"/>
            </configuration>
        </component>
        <component>
            <role>cyclopsgroup.waterview.valve.renderpage</role>
            <implementation>com.cyclopsgroup.waterview.core.RenderPageValve</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
            <configuration>
                <renderer extension="vm" role="cyclopsgroup.waterview.renderer.velocity"/>
                <renderer extension="jelly" role="cyclopsgroup.waterview.renderer.jelly"/>
            </configuration>
        </component>
        <!--
        *************** RESOLVERS ****************
        -->
        <component>
            <role>cyclopsgroup.waterview.renderer.velocity</role>
            <implementation>com.cyclopsgroup.waterview.velocity.VelocityPageRenderer</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
            <configuration>
                <cache-size>100</cache-size>
            </configuration>
        </component>
        <component>
            <role>cyclopsgroup.waterview.renderer.jelly</role>
            <implementation>com.cyclopsgroup.waterview.jelly.JellyPageRenderer</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
        </component>
    </components>
    <!--
        *************** LOAD ON START ****************
    -->
    <load-on-start>
        <component>
            <role>com.cyclopsgroup.waterview.Waterview</role>
        </component>
    </load-on-start>
</component-set>