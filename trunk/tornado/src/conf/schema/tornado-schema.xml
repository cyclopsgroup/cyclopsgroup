<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE database SYSTEM "http://db.apache.org/torque/dtd/database_3_1.dtd">
<database name="default" defaultIdMethod="idbroker">
    <table name="c_tnd_users" javaName="User" description="User OM">
        <column name="id" required="true" primaryKey="true" type="INTEGER" description="User Id"/>
        <column name="user_name" required="true" type="CHAR" size="30" description="User Name"/>
        <column name="encrypted_password" required="true" type="VARCHAR" size="255" description="Encrypted Password"/>
        <column name="description" type="VARCHAR" size="255"/>
        <column name="is_system" type="BIT" required="true" default="0"/>
        <column name="email" type="VARCHAR" size="255" required="true"/>
        <column name="first_name" type="VARCHAR" size="255" required="true"/>
        <column name="middle_name" type="VARCHAR" size="30"/>
        <column name="last_name" type="VARCHAR" size="255" required="true"/>
        <column name="last_signin" type="BIGINT"/>
        <column name="signin_counter" type="INTEGER" required="true" default="0"/>
        <column name="last_access" type="BIGINT"/>
        <column name="created_time" type="BIGINT" description="when this record is created"/>
        <column name="is_disabled" type="BIT" required="true" default="0" description="Is this user disabled"/>
        <unique name="unique_user_name">
            <unique-column name="user_name"/>
        </unique>
    </table>
    <table name="c_tnd_usrobjs" javaName="UserObject" description="Objects stored in user object">
        <column name="id" required="true" primaryKey="true" type="INTEGER" description="User Id"/>
        <column name="user_id" type="INTEGER" required="true" description="User Id"/>
        <column name="object_key" required="true" type="VARCHAR" size="255"/>
        <column name="object_class_name" required="true" type="VARCHAR" size="255"/>
        <column name="object_data" type="LONGVARCHAR"/>
        <foreign-key foreignTable="c_tnd_users">
            <reference local="user_id" foreign="id"/>
        </foreign-key>
    </table>
    <table name="c_tnd_groups" javaName="Group" description="Group OM">
        <column name="id" required="true" primaryKey="true" type="INTEGER" description="Group Id"/>
        <column name="group_name" required="true" type="CHAR" size="30" description="Group Name"/>
        <column name="description" type="VARCHAR" size="255"/>
        <column name="is_system" type="BIT" required="true" default="0"/>
        <column name="is_disabled" type="BIT" required="true" default="0" description="Is this user disabled"/>
        <unique name="unique_group_name">
            <unique-column name="group_name"/>
        </unique>
    </table>
    <table name="c_tnd_grphrch" javaName="GroupHierarchy">
        <column name="id" required="true" primaryKey="true" type="INTEGER" description="Id"/>
        <column name="group_id" required="true" type="INTEGER"/>
        <column name="parent_group_id" required="true" type="INTEGER"/>
        <foreign-key foreignTable="c_tnd_groups">
            <reference local="group_id" foreign="id"/>
        </foreign-key>
        <foreign-key foreignTable="c_tnd_groups">
            <reference local="parent_group_id" foreign="id"/>
        </foreign-key>
    </table>
    <table name="c_tnd_user_group" javaName="UserGroup" description="Link of user and group">
        <column name="id" required="true" primaryKey="true" type="INTEGER" description="Id"/>
        <column name="user_id" required="true" primaryKey="true" type="INTEGER" description="User Id"/>
        <column name="group_id" required="true" primaryKey="true" type="INTEGER" description="Group Id"/>
        <foreign-key foreignTable="c_tnd_users">
            <reference local="user_id" foreign="id"/>
        </foreign-key>
        <foreign-key foreignTable="c_tnd_groups">
            <reference local="group_id" foreign="id"/>
        </foreign-key>
    </table>
    <table name="c_tnd_acls" javaName="Acl">
        <column name="id" required="true" primaryKey="true" type="INTEGER" description="Id"/>
        <column name="owner_name" required="true" type="CHAR" size="30"/>
        <column name="owner_type" required="true" type="CHAR" size="1"/>
        <column name="is_role" type="BIT" default="0" required="true"/>
        <column name="permission" type="VARCHAR" size="255" required="true"/>
    </table>
    <table name="c_tnd_roles" javaName="Role">
    	<column name="id" required="true" primaryKey="true" type="INTEGER" description="Id"/>
        <column name="role_name" required="true" type="CHAR" size="30"/>
        <column name="description" type="VARCHAR" size="255"/>
    </table>
</database>
