<?xml version="1.0" encoding="UTF-8"?>
<plexus>
    <components>
        <component>
            <role>com.cyclopsgroup.tornado.sql.DataSourceService.default</role>
            <implementation>com.cyclopsgroup.tornado.sql.DBCPDataSourceService</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
            <configuration>
                <property name="driverClassName">com.mysql.jdbc.Driver</property>
                <property name="url">jdbc:mysql://localhost/tornado</property>
                <property name="username">dev</property>
                <property name="password">dev</property>
                <property name="maxActive">5</property>
                <property name="defaultAutoCommit">false</property>
            </configuration>
        </component>
        <component>
            <role>com.cyclopsgroup.tornado.sql.DataSourceManager</role>
            <implementation>com.cyclopsgroup.tornado.sql.DataSourceManager</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
            <configuration>
                <data-source name="default" role="com.cyclopsgroup.tornado.sql.DataSourceService.default" />
            </configuration>
        </component>
        <component>
            <role>com.cyclopsgroup.tornado.hibernate.HibernateService</role>
            <implementation>com.cyclopsgroup.tornado.hibernate.impl.DefaultHibernateService</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
            <configuration>
                <data-source name="default">
                    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
                </data-source>
            </configuration>
        </component>
        <component>
            <role>com.cyclopsgroup.tornado.security.SecurityService</role>
            <implementation>com.cyclopsgroup.tornado.security.impl.DefaultSecurityService</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
        </component>
        <component>
            <role>com.cyclopsgroup.tornado.security.UserAuthenticator</role>
            <implementation>com.cyclopsgroup.tornado.security.impl.DefaultUserAuthenticator</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
        </component>
        <component>
            <role>com.cyclopsgroup.tornado.portal.PortalService</role>
            <implementation>com.cyclopsgroup.tornado.portal.impl.DefaultPortalService</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
        </component>
        <component>
            <role>com.cyclopsgroup.tornado.hibernate.HibernateTransactionValve</role>
            <implementation>com.cyclopsgroup.tornado.hibernate.HibernateTransactionValve</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
        </component>
        <component>
            <role>com.cyclopsgroup.tornado.portal.SetUserPreferenceValve</role>
            <implementation>com.cyclopsgroup.tornado.portal.SetUserPreferenceValve</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
        </component>
        <component>
            <role>com.cyclopsgroup.tornado.portal.CheckPagePermissionValve</role>
            <implementation>com.cyclopsgroup.tornado.portal.CheckPagePermissionValve</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
        </component>
        <component>
            <role>com.cyclopsgroup.tornado.DefaultTornadoPipeline</role>
            <implementation>com.cyclopsgroup.waterview.core.Pipeline</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
            <configuration>
                <valves>
                    <valve role="com.cyclopsgroup.waterview.core.ParseURLValve" />
                    <valve role="com.cyclopsgroup.tornado.hibernate.HibernateTransactionValve" />
                    <valve role="com.cyclopsgroup.tornado.portal.CheckPagePermissionValve" />
                    <valve role="com.cyclopsgroup.tornado.portal.SetUserPreferenceValve" />
                    <valve role="com.cyclopsgroup.waterview.web.ProcessFormValve" />
                    <valve role="com.cyclopsgroup.waterview.core.ResolveActionsValve" />
                    <valve role="com.cyclopsgroup.waterview.jelly.DeterminePageValve" />
                    <valve role="com.cyclopsgroup.waterview.core.RenderPageValve" />
                </valves>
            </configuration>
        </component>
        <component>
            <role>com.cyclopsgroup.tornado.persist.PersistenceManager</role>
            <implementation>com.cyclopsgroup.tornado.hibernate.impl.HibernatePersistenceManager</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
        </component>
        <component>
            <role>com.cyclopsgroup.tornado.security.entity.SecurityEntityManager</role>
            <implementation>com.cyclopsgroup.tornado.security.entity.SecurityEntityManager</implementation>
            <lifecycle-handler>avalon</lifecycle-handler>
        </component>
        <component>
            <role>com.cyclopsgroup.tornado.TornadoServices</role>
            <implementation>com.cyclopsgroup.waterview.utils.ComponentGroup</implementation>
            <configuration>
                <component role="com.cyclopsgroup.waterview.WaterviewServices" />
                <component role="com.cyclopsgroup.tornado.portal.PortalService" />
                <component role="com.cyclopsgroup.tornado.security.SecurityService" />
            </configuration>
        </component>
    </components>
</plexus>